const ResponseCode={Success:0,InternalServerError:1,ForbiddenDomain:2,TakenID:3,InvalidURL:4};$(document).ready(function(){var t=!1;$("#custom-url-button").click(function(){t?($("#custom-url").hide(),$("#custom-url-button .up").hide(),$("#custom-url-button .down").show()):($("#custom-url").show(),$("#custom-url-button .up").show(),$("#custom-url-button .down").hide()),t=!t}),$("#footer").click(function(){$("#download")[0].scrollIntoView()}),$("#shorten-button").click(function(){var e=$("#url").val(),o=$("#custom-url").val();if(e.toLowerCase().includes("qshr.tn"))return M.toast({html:"Copied "+e+" to clipboard."}),document.getElementById("url").select(),void document.execCommand("copy");if(e.length>2048)M.toast({html:"URL is too long, maximum size is 2048."});else if(o.length>8)M.toast({html:"Custom URL is too long, maximum size is 8."});else{var n=-1;$.ajax({url:"/new/",type:"POST",async:!1,contentType:"application/json; charset=utf-8",data:JSON.stringify(t?{URL:e,ID:o}:{URL:e}),dataType:"json",success:function(t){switch(n=t.Code,t.Code){case ResponseCode.Success:$("#url").val("https://qshr.tn/"+t.ID);break;case ResponseCode.InternalServerError:M.toast({html:"Internal server error."});break;case ResponseCode.ForbiddenDomain:M.toast({html:"You can not shorten qshr.tn links."});break;case ResponseCode.TakenID:M.toast({html:"That custom link has already been taken."});break;case ResponseCode.InvalidURL:M.toast({html:"That is not a valid URL."})}}}),0===n&&(document.getElementById("url").select(),document.execCommand("copy"),M.toast({html:"Copied "+$("#url").val()+" to clipboard."}))}})});